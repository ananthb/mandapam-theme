{{- $contact := .Site.Data.contact -}}
{{- $calendar := $contact.calendar -}}
{{- if $calendar -}}
{{- $viewUrl := $calendar.view_url -}}
{{- $bookUrl := $calendar.book_url -}}
{{- $defaultView := default "month" $calendar.default_view -}}

<section id="calendar" class="calendar-section">
    <div class="container">
        <div class="row">
            {{/* Calendar View Column */}}
            {{ if $viewUrl }}
            <div class="col-lg-7 mb-4">
                <div class="calendar-view-container">
                    <h2>{{ default "Event Calendar" $calendar.view_title }}</h2>
                    <div class="calendar-view"
                         id="calendar-view"
                         hx-get="{{ $viewUrl }}?view={{ $defaultView }}&no_title=1"
                         hx-trigger="load"
                         hx-swap="innerHTML">
                        <div class="calendar-loading">
                            <div class="calendar-loading-spinner"></div>
                            <span>Loading calendar...</span>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}

            {{/* Booking Form Column */}}
            {{ if $bookUrl }}
            <div class="col-lg-5 mb-4">
                <div class="calendar-booking-container">
                    <h2>{{ default "Book Your Event" $calendar.booking_title }}</h2>
                    <div class="calendar-booking"
                         id="calendar-booking"
                         hx-get="{{ $bookUrl }}?no_title=1"
                         hx-trigger="load"
                         hx-swap="innerHTML">
                        <div class="calendar-loading">
                            <div class="calendar-loading-spinner"></div>
                            <span>Loading booking form...</span>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
    </div>
</section>
{{- end -}}
